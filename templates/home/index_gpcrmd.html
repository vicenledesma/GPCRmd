<head>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"], "language": "en" });
  </script>
  <script>document.domain = document.domain;</script>
  {% extends "home/base.html" %}
  {% load static %}
  {% block addon_css %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  {% endblock %}
</head>

<body>

  {% block content %}

  <!-- Banner -->
  <div class="showcase">
    <img class="bg-image" src="{% static 'home/images/canvas9.png' %}">

    <div class="vert_center" style="height:500px;margin:auto;">
      <h1 id="lema">The GPCR molecular dynamics database</h1>
      <h2 id="sublema">visulize · inspect · analyze</h2>
      <div class="row form-outline searchBarDiv">
        <input type="search" id="searchInput" class="col-xs-3 col-xs-offset-4 searchBar" placeholder="Search your structure" aria-label="Search" />
        <button id="search_button" type="submit" class="col-xs-1 searchBtn btn btn-primary btn-sm" onclick="search_item(this)">Search</button>
      </div>
      <p class="searchExamples">Examples: <a id="5-hydroxytryptamine receptor 1b" class="aExamples" onclick="search_example(this)">5-hydroxytryptamine receptor 1b</a>, <a id="5ht1b_human"
          class="aExamples" onclick="search_example(this)">5ht1b_human</a>, <a id="P28222" class="aExamples" onclick="search_example(this)">P28222</a>, <a 
          id="4IAQ" class="aExamples" onclick="search_example(this)">4IAQ</a></p>
    </div>
  </div>

  <div class="subanner jumbotron jumbotron-fluid">
    <div class="row">
      <p id="subtitle" class="subtitle">Welcome to the online platform with web-based visualization capabilities and a
        comprehensive
        analysis toolbox that allows visualizing, inspecting, and analysing GPCR molecular dynamics.</p>
    </div>
  </div>

  <!-- Tools -->
  <div id="tools" class="jumbotron jumbotron-fluid">
    
    <!-- First row -->
    <div class="toolRow row ">
      <div class="tool col-xs-6 col-md-3 ">
        <button id="analysis_ac_pan-button" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/ac.png' %}"
              alt="AllostericCommunication">
          <div class="caption">
            <h3 class="toolTitle">Allosteric<br>communication</h3>
          </div>
        </button>
      </div>

      <div class="tool col-xs-6 col-md-3">
        <button id="analysis_cs_pan-button" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/cs.png' %}" alt="ChemicalShift">
          <div class="caption">
            <h3 class="toolTitle">Chemical<br>shift</h3>
          </div>
        </button>
      </div>

      <div class="tool col-xs-6 col-md-3">
        <button id="analysis_variants_pan-button" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/gv.png' %}"alt="GeneticVariants">
          <div class="caption">
            <h3 class="toolTitle">Genetic<br>variants</h3>
          </viv>
        </button>
      </div>

      <div class="tool col-xs-6 col-md-3">
        <button id="analysis_tunnels_pan-button" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/tc.png' %}" alt="TunnelsChannels">
          <div class="caption">
            <h3 class="toolTitle">Tunnels and<br>channels</h3>
          </div>
        </button>
      </div>

      <div class="tool col-xs-6 col-md-3">
        <button id="analysis_pharmacophores_pan-button" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/dp.png' %}" alt="Pharmacophores">
          <div class="caption">
            <h3 class="toolTitle">Dynamic<br>pharmacophores</h3>
          </div>
        </button>
      </div>

    </div>

    <!-- Second row -->
    <div class="toolRow row">
      <div class="tool col-xs-6 col-md-3">
        <button id="analysis_watermap_pan-button" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/wd.png' %}" alt="WaterVolume">
          <div class="caption">
            <h3 class="toolTitle">Water volume<br>distribution</h3>
          </div>
        </button>
      </div>

      <div class="tool col-xs-6 col-md-3">
        <button id="analysis_fplot_pan" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/in.png' %}"
              alt="Interaction network">
          <div class="caption">
            <h3 class="toolTitle">Interaction<br>network</h3>
          </div>
        </button>
      </div>

      <div class="tool col-xs-6 col-md-3">
        <button id="analysis_rmsd_pan-button" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/rmsd.png' %}" alt="RMSD">
          <div class="caption">
            <h3 class="toolTitle">RMSD</h3>
          </div>
        </button>
      </div>

      <div class="tool col-xs-6 col-md-3">
        <button id="interaction_freqs_pan-button" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/if.png' %}"
              alt="InteractionFrequencies">
          <div class="caption">
            <h3 class="toolTitle">Interaction<br>frequencies</h3>
          </div>
        </button>
      </div>

      <div class="tool col-xs-6 col-md-3">
        <button id="analysis_dist_pan-button" class="thumbnail toolBox" onclick="go_to_tool(this)">
          <img class="toolImg" src="{% static 'home/images/tools/dist.png' %}" alt="Distance">
          <div class="caption">
            <h3 class="toolTitle">Distance</h3>
          </div>
        </button>
      </div>
    </div>

  </div>

  <!-- Family tree -->
  <div class="ft jumbotron jumbotron-fluid">
    <div class="row">
      <div class="famTextDiv col-xs-12 col-md-6 col-md-offset-1 vcenter">
        <a href="/gpcrtree/">
          <h2 class="jumbotronTitle famTitle display-4">Check the available simulations</h2>
        </a>
        <p class="famText lead">Look into the family tree to find your simulated structure.
          The family tree helps you find the GPCR you are looking for. The GPCRs are classified by class
          and family. Finally, the different PDBs corresponding to each protein are displayed. Put your
          mouse in the PDB you are interested in and find out the different simulations.<br>
          There are XXX structures available!
        </p>
      </div>
      <div class="famImageDiv col-xs-12 col-md-4 vcenter">
        <a href="/gpcrtree/"><img class="famImage" src="{% static 'home/images/famTree.png' %}"></a>
      </div>
    </div>
  </div>

  <!-- Workbench -->
  <div class="wb jumbotron jumbotron-fluid">
    <div class="row">
      <div class="workImageDiv col-xs-12 col-md-5 col-md-offset-1 vcenter">
        <a href="/view/36"><img class="workImage" src="{% static 'home/images/workbench.png' %}"></a>
      </div>
      <div class="workTextDiv col-xs-12 col-md-5 vcenter">
        <a href="/view/36">
          <h2 class="jumbotronTitle workTitle display-4">Quickly analyse <br>simulations</h2>
        </a>
        <p class="workText lead">Visualize and inspect the GPCR molecular simulations in the workbench.
          The simulation is displayed in the left pannel with different selection options available.
          In the righ pannel, you could find all the different tools that can be instantaneously applied
          into the simulation.<br>
          Apply all the tools available in the workbench to analyze your simulation in depth!
        </p>
      </div>
    </div>
  </div>

  <!-- Datasets -->
  <div class="ds ft jumbotron jumbotron-fluid">
    <div class="row">

      <div class="famTextDiv col-xs-12 col-md-6 col-md-offset-1 vcenter">
        <a href="/dynadb/datasets/">
          <h2 class="jumbotronTitle famTitle display-4">Collaborative database</h2>
        </a>
        <p class="famText lead">Our simulations have been computed and curated by our research team together
          with the collaboration of worldwide users that upload their own simulations.<br>
          Check our <a class="jumbotronTextLink" href="/dynadb/datasets/">dataset</a> or <a class="jumbotronTextLink"
            href="/accounts/memberpage/">upload your own simulation</a>!</p>
      </div>

      <div class="col-xs-12 col-md-4 vcenter">
        <div class="panel panel-primary text_col">
          <h3 class="panel-heading">Statistics</h3>
          <div class="panel-body">

            <div id="statsCarousel" class="carousel slide" data-interval="false" data-ride="carousel">

              <!-- Wrapper for slides -->
              <div class="carousel-inner">
                <div class="item active" style="padding:15px;">
                  <h4 class="extrainfo_title">Simulations in GPCRmd</h4>
                  <div style="overflow-x: auto;overflow-y: hidden">
                    <div id="stats_subm" data-subm_data="{{subm_data}}" style="width: 100%; height: 100%;margin:auto;">
                    </div>
                  </div>
                </div>

                <div class="item" style="padding:15px">
                  <h4 class="extrainfo_title">Simulated GPCR families with known structure</h4>
                  <div style="overflow-x: auto;overflow-y: hidden">
                    <div id="fam_stats" style="width: 300px; height: 400px;margin:auto" data-fam_stats="{{fam_stats}}">
                    </div>
                  </div>
                </div>

                <div class="item" style="padding:15px">
                  <h4 class="extrainfo_title">Simulated GPCR subtypes with known structure</h4>
                  <div style="overflow-x: auto;overflow-y: hidden">
                    <div id="subtype_stats" style="width: 300px; height: 400px;margin:auto"
                      data-subtype_stats="{{subtype_stats}}"></div>
                  </div>
                </div>

                <div class="item" style="padding:15px">
                  <h4 class="extrainfo_title">Simulated PDB structures with known structure</h4>
                  <div style="overflow-x: auto;overflow-y: hidden">
                    <div id="pdb_stats" style="width: 300px; height: 400px;margin:auto" data-pdb_stats="{{pdb_stats}}">
                    </div>
                  </div>
                </div>

              </div>

              <!-- Left and right controls -->
              <a class="left carousel-control" href="#statsCarousel" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="right carousel-control" href="#statsCarousel" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right"></span>
                <span class="sr-only">Next</span>
              </a>

              <!-- Indicators -->
              <ol id="stats" class="carousel-indicators" style="position: relative;margin-bottom:0;">
                <li data-target="#statsCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#statsCarousel" data-slide-to="1"></li>
                <li data-target="#statsCarousel" data-slide-to="2"></li>
                <li data-target="#statsCarousel" data-slide-to="3"></li>
              </ol>

            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Invisible FamTree to correctly display statistics -->
    <div class="col-xs-6 col-md-6 plot_section_col" id="plot_col" style="display:none;">
      <div style="display: none;">
        <div style="text-align:center;margin:0 auto 10px auto">
          <h2>3D-GPCRome tree</h2>
          <p>Click on a GPCR structure (PDB id) to access the MD simulations*</p>
          <div class="">
            <a href="https://youtu.be/sNQNWcBhIyg" class="btn btn-default btn-sm howtobtn" target="_blank" role="button"
              style="">How to<br>use it<br><span class="glyphicon glyphicon-play" style="font-size:14px"></span></a>
          </div>
        </div>
        <div id="chart" data-chart_data="{{tree_data}}" style="margin:auto;">
          <!-- width: 826px; height: 826px;-->

        </div>
      </div>
      <div class="extrainfo_section">
        <div class="extrainfo_col">
          <div class="panel-body">
            <div id="statsCarousel" class="carousel slide" data-interval="false" data-ride="carousel"
              style="height:100%">
              <!-- Wrapper for slides -->
              <div class="carousel-inner">
                <div class="item active" style="padding:15px;width: 100%; height: 100%;">
                  <h4 class="extrainfo_title">Simulations in GPCRmd</h4>
                  <div style="overflow-x: auto;overflow-y: hidden; width: 100%; height: 100%;">
                    <div id="stats_subm" data-subm_data="{{subm_data}}" style="width: 100%; height: 100%;margin:auto;">
                    </div>
                  </div>
                </div>

                <div class="item" style="padding:15px">
                  <h4 class="extrainfo_title">Simulated GPCR families</h4>
                  <p>Simulated GPCR families with known structure.*</p>
                  <div style="overflow-x: auto;overflow-y: hidden">
                    <div id="fam_stats" style="width: 300px; height: 400px;margin:auto" data-fam_stats="{{fam_stats}}">
                    </div>
                  </div>
                </div>

                <div class="item" style="padding:15px">
                  <h4 class="extrainfo_title">Simulated GPCR subtypes</h4>
                  <p>Simulated GPCR subtypes with known structure.*</p>
                  <div style="overflow-x: auto;overflow-y: hidden">
                    <div id="subtype_stats" style="width: 300px; height: 400px;margin:auto"
                      data-subtype_stats="{{subtype_stats}}"></div>
                  </div>
                </div>

                <div class="item" style="padding:15px">
                  <h4 class="extrainfo_title">Simulated PDB structures</h4>
                  <p>Simulated GPCRs with known structure.*</p>
                  <div style="overflow-x: auto;overflow-y: hidden">
                    <div id="pdb_stats" style="width: 300px; height: 400px;margin:auto" data-pdb_stats="{{pdb_stats}}">
                    </div>
                  </div>
                </div>


              </div>
              <!-- Left and right controls -->
              <a class="left carousel-control" href="#statsCarousel" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="right carousel-control" href="#statsCarousel" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right"></span>
                <span class="sr-only">Next</span>
              </a>
              <!-- Indicators -->
              <ol class="carousel-indicators" style="position: relative;margin-bottom:0;">
                <li data-target="#statsCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#statsCarousel" data-slide-to="1"></li>
                <li data-target="#statsCarousel" data-slide-to="2"></li>
                <li data-target="#statsCarousel" data-slide-to="3"></li>
              </ol>
            </div>
          </div>

        </div>
      </div>
    </div>

  </div>

  {% endblock content %}


  {% block addon_js %}
  <!--<script src="https://cdn.jsdelivr.net/npm/pdfkit@0.10.0/js/pdfkit.standalone.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/svg-to-pdfkit@0.1.8/source.js"></script>-->

  <script src="https://d3js.org/d3.v5.min.js"></script>
  <!--<script type="module" src="{% static 'home/js/gpcrmd_homepage.js' %}"></script>-->
  <script src="{% static 'home/js/gpcrmd_homepage.js' %}"></script>

  <!-- Big menu in the homepage -->
  <script>
    $(document).ready(function() {
      document.getElementById("topmenu").style.height = "110px";
      document.getElementById("logo").style.height = "81px";
      document.getElementById("navbar").style.marginTop = "1%";
    });
  </script>

  <!-- Smaller topmenu when scrolling down -->
  <script>
    window.onscroll = function () { scrollFunction() };
    function scrollFunction() {
      if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
        document.getElementById("topmenu").style.height = "80px";
        document.getElementById("logo").style.height = "65px";
        document.getElementById("navbar").style.marginTop = "0.5%";
      } else {
        document.getElementById("topmenu").style.height = "110px";
        document.getElementById("logo").style.height = "81px";
        document.getElementById("navbar").style.marginTop = "1%";
      }
    } 
  </script>

  <!-- Go to search page with the inputed text in the URL-->
  <script>
    function search_item(button){
      var inputext=document.getElementById("searchInput").value;
      window.location.href = '/dynadb/search/#'+inputext;
    }
    $("#searchInput").keyup(function(event) {
      if (event.keyCode === 13) {
          $("#search_button").click();
      }
    });
  </script>

  <!-- Go to the search page with the example link selected in the URL  -->
  <script>
    function search_example(link){
      var example=link.getAttribute('id');
      window.location.href = '/dynadb/search/#'+example;
    }
  </script>

  <!-- Tools selection, go to view 36 with the corresponding tab visible -->
  <script>
    function go_to_tool(button){
      var toolid=button.getAttribute('id').split('-');
      window.location.href = '/view/36/#'+toolid[0];
    }
   </script>
   
  {% endblock %}


</body>